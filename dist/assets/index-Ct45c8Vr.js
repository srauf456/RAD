import{i as ne,g as le,r as c,u as I,o as ie,j as e,G as oe,s as ce,M as de,N as w,a as me,b as ue,c as xe,d as he,e as ge,C as A,A as O,p as E,f as L,L as _,h as V,k as z,P as W,l as pe,m as q,n as be,t as fe,q as je,R as ve,T as ye,v as Ne,w as ke,x as B,y as we,D as Ce,z as Se,B as De,E as Ae,F as Ee,H as J,I as Le,J as N,K as Re,O as Ue}from"./vendor-B8TmoDeR.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const Me={apiKey:"AIzaSyBUfDfqdzXvsBZk0fQk0DQP9fqW-M8PKpY",authDomain:"reactdashboard.firebaseapp.com",projectId:"reactdashboard-38cd8",messagingSenderId:"373145203853"},Te=ne(Me),D=le(Te),H=c.createContext(),x=()=>c.useContext(H);function $e({children:t}){const[n,r]=c.useState("light"),[l,s]=c.useState(!1),[i,o]=c.useState(null),[a,d]=c.useState(null),h=I(),[p,m]=c.useState([]),b="admin@gmail.com",[j,v]=c.useState("en"),[y,u]=c.useState(""),[C,R]=c.useState(!1),[U,M]=c.useState([]),X=()=>{r(f=>f==="light"?"dark":"light")},Y=()=>{localStorage.setItem("guest","true"),s(!0),o({name:"Guest User",email:null,uid:"guest"}),d("user"),T({action:"Guest Access",text:"Guest user entered dashboard",type:"guest"})};c.useEffect(()=>{const f=ie(D,async g=>{if(g){s(!0),o({name:g.displayName||g.email,email:g.email,uid:g.uid}),T({action:"User logged in",text:`${g.displayName||g.email} logged in`,type:"login"});try{if(g.email===b)d("admin");else{const F=(await(await fetch("https://dummyjson.com/users?limit=15")).json()).users.find(re=>re.email===g.email);F?.role?d(F.role):d("user")}}catch($){console.log("Error fetching user role:",$)}}else localStorage.getItem("guest")?(s(!0),o({name:"Guest user",email:null,uid:"guest"}),d("user")):(s(!1),o(null),d(null))});return()=>f()},[]);const Z=f=>{o(f),s(!0)},ee=()=>{o(null),s(!1),h("/login")},te=async()=>{const f=new oe;try{const g=await ce(D,f);console.log("Logged in as:",g.user.displayName)}catch(g){console.log("Google auth failed:",g),alert("Login failed. Try again.")}},se=f=>{v(f)},T=f=>{M(g=>[{id:Date.now(),time:new Date().toLocaleTimeString(),...f},...g])},ae={theme:n,toggleTheme:X,isLoggedIn:l,loginUser:Z,logoutUser:ee,userInfo:i,language:j,changeLanguage:se,role:a,globalMessage:y,setGlobalMessage:u,loginWithGoogle:te,isSidebarOpen:C,setSidebarOpen:R,visitorData:p,setVisitorData:m,continueAsGuest:Y,activities:U,addActivity:T};return e.jsx(H.Provider,{value:ae,children:t})}function Pe(){const{theme:t,toggleTheme:n,isLoggedIn:r,logoutUser:l,changeLanguage:s,isSidebarOpen:i}=x(),o=I();return e.jsxs("div",{className:`w-64 fixed h-screen left-0 top-16 z-50 bg-gray-700 overflow-y-auto shadow transition-transform duration-300
            ${i?"translate-x-0":"-translate-x-full"}  md:translate-x-0`,children:[e.jsx("div",{className:"flex gap-10 items-center justify-center",children:e.jsx(de,{className:"mt-6 size-18 text-black bg-green-300"})}),e.jsx("button",{className:"gap-4 mt-12 text-black",onClick:n,children:t==="light"?"Dark Mode":"Light Mode"}),e.jsxs("div",{className:"flex flex-row justify-center items-center gap-2 mt-6 text-black",children:[e.jsx("button",{onClick:()=>s("en"),children:"EN"}),e.jsx("button",{onClick:()=>s("ar"),children:"AR"})]}),e.jsxs("nav",{className:"flex flex-col gap-4 p-4 mt-10",children:[e.jsxs(w,{to:"/dashboard",className:({isActive:a})=>`flex gap-2 p-2 items-center hover:bg-gray-600 rounded ${a?"bg-gray-900 text-green-300":"text-gray-300"}`,children:[e.jsx(me,{}),"Dashboard"]}),e.jsxs(w,{to:"/analytics",className:({isActive:a})=>`flex gap-2 p-2 items-center hover:bg-gray-600 rounded ${a?"bg-gray-900 text-green-300":"text-gray-300"}`,children:[e.jsx(ue,{}),"Analytics"]}),e.jsxs(w,{to:"/users",className:({isActive:a})=>`flex gap-2 p-2 items-center hover:bg-gray-600 rounded ${a?"bg-gray-900 text-green-300":"text-gray-300"}`,children:[e.jsx(xe,{}),"Users"]}),e.jsxs(w,{to:"/settings",className:({isActive:a})=>`flex gap-2 p-2 items-center hover:bg-gray-600 rounded ${a?"bg-gray-900 text-green-300":"text-gray-300"}`,children:[e.jsx(he,{}),"Settings"]}),r?e.jsx("div",{children:e.jsx("button",{onClick:l,className:"text-xl mt-6 px-3 py-1 rounded text-black",children:"Logout"})}):e.jsx("button",{onClick:()=>o("/login"),className:"text-xl mt-6 px-3 py-1 rounded text-black",children:"Login"})]})]})}function Ie(){const{theme:t,isLoggedIn:n,userInfo:r,language:l,isSidebarOpen:s,setSidebarOpen:i}=x(),o=()=>{i(!s)};return e.jsx("header",{className:`fixed top-0 left-0 right-0 h-16 shadow-md py-4 px-8 flex items-center justify-between z-50 ${t==="dark"?"bg-gray-600 text-white":"bg-white"}`,children:e.jsxs("div",{className:"h-full md:px-8 flex items-center max-w-6xl mx-auto gap-10 md:gap-36",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-2",children:[e.jsx("button",{onClick:o,className:`md:hidden ${t==="dark"?"bg-gray-800 text-black":"bg-white"}`,children:e.jsx(ge,{})}),e.jsx(w,{to:"/dashboard",className:"flex items-center",children:l==="en"?e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"md:text-xl",children:"R.A.D"}),e.jsx("span",{className:"text-xs md:text-lg sm:block hidden",children:" React Admin Dashboard"})]}):e.jsx("p",{className:"lg:text-4xl",children:"لوحة التحكم"})})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("div",{className:"hidden sm:flex gap-2",children:[e.jsx("span",{className:"text-md text-gray-500 dark:text-gray-400",children:l==="en"?"Welcome,":"مرحبا"}),e.jsx("span",{className:"text-sm md:text-base ",children:r?.name})]}),e.jsxs("div",{className:"sm:hidden flex items-center gap-1 text-sm",children:[e.jsx("span",{className:"hidden",children:l==="en"?"Welcome":"مرحبا"}),e.jsx("span",{className:"",children:r?.name})]}),e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-gradient-to-br from-green-300 to-gray-200 flex items-center justify-center text-black font-semibold text-sm md:text-base flex-shrink-0",children:r?.name?.charAt(0)?.toUpperCase()||"U"})]})]})})}function P(t){const{theme:n}=x();return e.jsx("div",{className:n==="dark"?"bg-gray-700 text-white":"bg-white text-black",children:e.jsxs("div",{className:"rounded shadow p-4 flex justify-between flex-col ",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[t.title," "]}),e.jsx("p",{className:"text-2xl font-bold",children:t.value})]})})}A.register(O,E,L,_,V,z,W,pe);function K(t){const{theme:n}=x();var r=n==="dark"?"white":"black";const l={responsive:!0,plugins:{legend:{position:"top",labels:{color:r}},title:{display:!0,text:"Chart.js Line Chart"}},scales:{x:{ticks:{color:r}},y:{ticks:{color:n==="dark"?"white":"black"}}}},s={labels:t.labels,datasets:[{label:"Visitors",data:t.dataPoints,borderColor:"#7bf1a8",fill:!1,tension:.1,backgroundColor:"rgba(0,0,0,1)"}]};return e.jsx("div",{className:n==="dark"?"bg-gray-800 text-white":"bg-white text-black",children:e.jsx(q,{options:l,data:s,height:300})})}A.register(O,E,L);function Oe({labels:t,dataPoints:n}){const{theme:r}=x();var l=r==="dark"?"white":"black";const s={labels:t,datasets:[{label:"Department Distribution",data:n,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(200, 149, 155, 0.2)","rgba(55, 149, 34, 0.2)","rgba(245, 99, 64, 0.2)","rgba(75, 89, 164, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(200, 149, 155, 1)","rgba(55, 149, 34, 1)","rgba(245, 99, 64, 1)","rgba(75, 89, 164, 1)"],borderWidth:1}]},i={responsive:!0,plugins:{legend:{position:"bottom",labels:{color:l}}}};return e.jsx(be,{data:s,options:i,height:300})}function Q(){return e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin rounded-full border-4 border-t-transparent h-10 w-10 border-blue-600"})})}function Fe(...t){return fe(je(t))}function Ge({...t}){return e.jsx(ve,{"data-slot":"hover-card",...t})}function _e({...t}){return e.jsx(ye,{"data-slot":"hover-card-trigger",...t})}function Ve({className:t,align:n="center",sideOffset:r=4,...l}){return e.jsx(Ne,{"data-slot":"hover-card-portal",children:e.jsx(ke,{"data-slot":"hover-card-content",align:n,sideOffset:r,className:Fe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}function ze(){const[t,n]=c.useState([]),{visitorData:r,setVisitorData:l}=x(),[s,i]=c.useState([]),[o,a]=c.useState(!0),[d,h]=c.useState(null);return c.useEffect(()=>{(async()=>{try{const m=await B.get("https://dummyjson.com/users?limit=20");n(m.data.users),l([23,45,67,34,56,78,90,23,65,99,87,90]);const b=m.data.users.reduce((j,v)=>{const y=v.company?.department||"Unknown";return j[y]=(j[y]||0)+1,j},{});i(b),setTimeout(()=>{a(!1)},1500)}catch(m){h("Failed to fetch",m.message),a(!1)}})()},[l]),d&&alert("Error incurred:",d),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Growth Overview"}),e.jsx("h4",{children:"Take a look at the updated site overview."}),o?e.jsx(Q,{}):e.jsxs("div",{className:"flex flex-wrap gap-16 mt-8 sm:flex justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-16 w-80 ",children:[e.jsx(Ge,{children:e.jsxs(_e,{children:[e.jsx(Ve,{children:"Total Users"})," ",e.jsx(P,{title:"Total Users",value:t.length})]})}),e.jsx(P,{title:"Signups",value:"32"}),e.jsx(P,{title:"Revenue",value:"3200"})]}),e.jsxs("div",{className:"rounded shadow-amber-50 gap-14",children:[e.jsxs("div",{className:"h-80",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Site Visitors"}),r&&r.length>0?e.jsx(K,{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dataPoints:r}):e.jsx("p",{children:"Loading data"})]}),e.jsxs("div",{className:"h-80 mt-16",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Department Distribution"}),e.jsx(Oe,{labels:Object.keys(s),dataPoints:Object.values(s)})]})]})]})]})}A.register(V,z,W,_,E,we,L);function We({labels:t,currentData:n,previousData:r,height:l=250}){const{theme:s}=x();var i=s==="dark"?"white":"black";const o={labels:t,datasets:[{fill:!0,label:"Current Month Visitors",data:n,borderColor:"#7bq2b9",backgroundColor:"#7bf1a8"},{fill:!0,label:"Previous Month Visitors",data:r,borderColor:"#FFFFFF",backgroundColor:"#7bf1a8"}]},a={responsive:!0,plugins:{legend:{position:"top",labels:{color:s==="dark"?"white":"black"}},title:{display:!0,text:"Site Visitors Comparison",color:s==="dark"?"white":"black"}},scales:{x:{ticks:{color:i}},y:{ticks:{color:s==="dark"?"white":"black"}}}};return e.jsx("div",{className:s==="dark"?"bg-gray-350":"bg-white text-black",children:e.jsx("div",{height:l,children:e.jsx(q,{data:o,options:a,height:300})})})}A.register(O,E,L);function G({labels:t,values:n,title:r}){const{theme:l}=x();var s=l==="dark"?"white":"black";const i={labels:t,datasets:[{label:"# of Devices",data:n,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}],plugins:{legend:{position:"top",labels:{color:s}}}},o={responsive:!0,plugins:{legend:{position:"top",labels:{color:s}},title:{display:!0,text:"My Doughnut Chart"}}};return e.jsxs("div",{children:[e.jsx("h2",{children:r}),e.jsx(Ce,{data:i,options:o})]})}function qe(){const{activities:t,theme:n}=x();return t.length?e.jsxs("div",{className:"rounded-xl p-4 shadow space-y-3 mt-16",children:[e.jsx("h2",{className:`font-semibold text-lg ${n==="dark"?"text-white":"text-black"}`,children:"Recent Activity"}),t.map(r=>e.jsxs("div",{className:"border rounded-lg p-3 hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsx("span",{children:r.action}),e.jsx("span",{className:`${n==="dark"?"text-white":"text-black"}`,children:r.time})]}),e.jsx("p",{className:`${n==="dark"?"text-white text-xs":"text-gray-500 text-xs"}`,children:r.text})]},r.id))]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No recent activity"})}function Be(){const t=()=>Array.from({length:30},()=>Math.floor(50+Math.random()*120)),n=c.useMemo(()=>t(),[]),r={labels:["Direct","Social","Organic Search","Referral"],values:[120,80,150,40]},l={labels:["Desktop","Mobile","Tablet"],values:[180,140,40]},{visitorData:s}=x(),i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date().getMonth(),a=o>0?o-1:11,{currentData:d,previousData:h,labels:p}=c.useMemo(()=>{if(!s||s.length===0)return{currentData:[],previousData:[],labels:[]};const m=s[o]||0,b=s[a]||0;return{currentData:[b,m],previousData:[b,m],labels:[i[a],i[o]]}},[s,o,a]);return e.jsxs("div",{children:[e.jsx("h1",{children:"Analytics"}),e.jsx("div",{className:"flex flex-wrap gap-16 mt-8 sm:flex justify-center",children:s&&s.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(We,{labels:p,currentData:d,previousData:h,height:250}),e.jsx(K,{labels:[...Array(30).keys()].map(m=>`Day ${m+1}`),dataPoints:n,title:"Daily"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 mt-6 gap-4",children:[e.jsx(G,{labels:r.labels,values:r.values,title:"Traffic Sources",className:"text-lg font-semibold"}),e.jsx(G,{labels:l.labels,values:l.values,title:"Device Breakdown"})]}),e.jsx(qe,{})]}):e.jsx("p",{children:"Loading data"})})]})}function Je(){const[t,n]=c.useState(!1),[r,l]=c.useState(""),[s,i]=c.useState(""),o=I(),{isLoggedIn:a,loginWithGoogle:d,continueAsGuest:h}=x();c.useEffect(()=>{a&&o("/dashboard")},[a]);const p=async m=>{m.preventDefault();try{t?(await Se(D,r,s),alert("Account created sucessfully")):(await De(D,r,s),alert("Logged in"))}catch(b){alert(b.message)}};return e.jsxs("form",{onSubmit:p,className:"m-6 p-2 gap-6 flex justify-center items-center flex-col shadow-gray-200 shadow-md",children:[e.jsx("h2",{className:"text-3xl",children:t?"Register":"Login"}),e.jsx("input",{className:"border p-2",type:"email",value:r,placeholder:"Email",onChange:m=>l(m.target.value),required:!0}),e.jsx("input",{className:"border p-2",type:"password",value:s,placeholder:"Password",onChange:m=>i(m.target.value),required:!0}),e.jsx("button",{type:"submit",className:"rounded text-xl mt-6 px-3 py-1",children:t?"Create Account":"Login"}),e.jsx("button",{onClick:d,className:"rounded hover:bg-green-300",children:"Login with Google"}),e.jsx("p",{onClick:()=>n(!t),className:"cursor-pointer",children:t?"Already have an account? Login":"Don't have an account? Register"}),e.jsx("button",{className:"rounded text-xl mt-6 px-3 py-1",onClick:h,children:"Continue As Guest"})]})}function He(){const{theme:t,toggleTheme:n,language:r,changeLanguage:l}=x();return e.jsxs("div",{children:[e.jsx("h1",{children:"Settings"}),e.jsxs("form",{className:"space-y-4 mt-4 flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("label",{className:"font-semibold",children:"Theme"}),e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-black rounded",children:t==="light"?"Switch to Dark":"Switch to Light"})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("label",{className:"font-semibold",children:"Language"}),e.jsxs("select",{value:r,onChange:s=>l(s.target.value),className:"border p-2 rounded",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Arabic"})]})]})]})]})}function Ke(t,n="export.csv"){if(!t||!t.length)return;const r=Object.keys(t[0]),s=[r.join(","),...t.map(d=>r.map(h=>`"${d[h]??""}"`).join(","))].join(`
`),i=new Blob([s],{type:"text/csv"}),o=URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download=n,a.click(),URL.revokeObjectURL(o)}function Qe({users:t,dispatch:n,setActiveUser:r}){const{role:l,userInfo:s,addActivity:i}=x(),o=()=>{const a=t.map(d=>({Name:`${d.firstName} ${d.lastName}`,Email:d.email,Role:d.role,Department:d.company?.department||""}));Ke(a,"users.csv")};return e.jsxs("div",{className:"w-full",children:[l==="admin"&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("button",{onClick:o,className:"rounded gap-2 text-black",children:"Export CSV"})}),e.jsx("div",{className:"md:hidden space-y-4",children:t.map(a=>e.jsxs("div",{className:"bg-white p-4 rounded shadow-green-300 border",children:[e.jsx("div",{className:"flex  justify-center items-start mb-3",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-black",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.email})]})}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsxs("p",{className:"text-sm text-black",children:[e.jsx("span",{className:"font-semibold text-black",children:"Role:"})," ",a.role]}),e.jsxs("p",{className:"text-sm text-black",children:[e.jsx("span",{className:"font-semibold text-black",children:"Department:"})," ",a.company.department]})]}),l==="admin"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>r(a),className:"flex-1 px-3 py-2 rounded flex items-center justify-center gap-2 text-black",children:[e.jsx(Ae,{})," Edit"]}),e.jsxs("button",{onClick:()=>{n({type:"DELETE_USER",payload:a.id}),l==="admin"&&i({text:`${s?.name||"Admin"} deleted user: ${a.firstName} ${a.lastName}`})},className:"flex-1 px-3 py-2  rounded flex items-center justify-center gap-2 text-black",children:[e.jsx(Ee,{})," Delete"]})]})]},a.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"rounded shadow max-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border",children:"Name"}),e.jsx("th",{className:"p-3 border",children:"Email"}),e.jsx("th",{className:"p-3 border",children:"Role"}),e.jsx("th",{className:"p-3 border",children:"Department"}),l==="admin"&&e.jsx("th",{className:"p-3 border",children:"X"}),l==="admin"&&e.jsx("th",{className:"p-3 border",children:"Edit"})]})}),e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{children:[e.jsxs("td",{className:"p-3 border",children:[a.firstName+" ",a.lastName]}),e.jsx("td",{className:"p-3 border",children:a.email}),e.jsx("td",{className:"p-3 border",children:a.role}),e.jsx("td",{className:"p-3 border",children:a.company.department}),l==="admin"&&e.jsx("td",{className:"p-3 border",children:e.jsx("button",{onClick:()=>{n({type:"DELETE_USER",payload:a.id}),l==="admin"&&i({text:`${s?.name||"Admin"} deleted user: ${a.firstName} ${a.lastName}`})},className:"px-3 py-1 bg-red-500 text-red-500 rounded",children:"Delete"})}),l==="admin"&&e.jsx("td",{className:"p-3 border",children:e.jsx("button",{onClick:()=>r(a),className:"px-3 py-1 bg-red-500 text-red-500 rounded",children:"Edit"})})]},a.id))})]})})]})}function Xe({editUser:t,onAdd:n,onUpdate:r,onDoneEditUser:l}){const[s,i]=c.useState({firstName:"",lastName:"",email:"",role:"",company:{department:""}});c.useEffect(()=>{i(t||{firstName:"",lastName:"",email:"",role:"",company:{department:""}})},[t]);function o(d){d.preventDefault(),t?(r({...s,id:t.id}),l()):n({...s,id:Date.now()}),i({firstName:"",lastName:"",email:"",role:"",company:{department:""}}),console.log("Updating user:",{...s,id:t?.id})}function a(d){const{name:h,value:p}=d.target;i(m=>({...m,[h]:p}))}return e.jsx("div",{children:e.jsxs("form",{onSubmit:o,className:"flex flex-col md:w-2xl",children:[e.jsx("input",{className:"border p-2",onChange:a,name:"firstName",placeholder:"First Name",value:s.firstName}),e.jsx("input",{className:"border p-2",onChange:a,name:"lastName",placeholder:"Last Name",value:s.lastName}),e.jsx("input",{className:"border p-2",onChange:a,name:"email",placeholder:"Email",value:s.email}),e.jsx("input",{className:"border p-2",onChange:a,name:"role",placeholder:"Role",value:s.role}),e.jsx("input",{className:"border p-2",onChange:a,name:"department",placeholder:"Department",value:s.company.department}),e.jsxs("div",{className:"flex gap-3 items-center justify-center py-6",children:[e.jsx("button",{type:"submit",className:" text-black px-6 py-2 rounded",children:t?"Update User":"Add User"}),e.jsx("button",{type:"button",onClick:l,className:" text-black px-6 py-2 rounded hover:bg-gray-600",children:"Cancel"})]})]})})}const Ye={users:[]},Ze=(t,n)=>{switch(n.type){case"SET_USERS":return{...t,users:n.payload};case"ADD_USER":return{...t,users:[...t.users,{...n.payload,company:{department:n.payload.department}}]};case"DELETE_USER":return{...t,users:t.users.filter(r=>r.id!==n.payload)};case"TOGGLE_USER_STATUS":return{...t,users:t.users.map(r=>r.id===n.payload?{...r,isActive:!r.isActive}:r)};case"UPDATE_USER":return{...t,users:t.users.map(r=>r.id===n.payload.id?n.payload:r)};default:return t}};function et(){const{role:t,addActivity:n,userInfo:r}=x(),[l,s]=c.useReducer(Ze,Ye),[i,o]=c.useState(!0),[a,d]=c.useState(null),[h,p]=c.useState(""),[m,b]=c.useState("All"),[j,v]=c.useState("All");c.useEffect(()=>{console.log("Users role: ",t),(async()=>{const C=await B.get("https://dummyjson.com/users?limit=20");s({type:"SET_USERS",payload:C.data.users}),o(!1)})()},[t]);const y=l.users.filter(u=>{const R=`${u.firstName} ${u.lastName}`.toLowerCase().includes(h.toLowerCase())||u.email.toLowerCase().includes(h.toLowerCase()),U=m==="All"||u.role===m,M=j==="All"||u.company?.department.toLowerCase()===j.toLowerCase();return R&&U&&M});return e.jsxs("div",{children:[e.jsx("h1",{children:"Users"}),t==="admin"&&!a&&e.jsx("div",{className:"flex flex-wrap gap-16 mt-8 sm:flex justify-center",children:e.jsx("button",{onClick:()=>d({}),className:"bg-green-300 text-black py-2 rounded m-4 w-fit",children:"Add New User"})}),t==="admin"&&a&&e.jsx(Xe,{editUser:a&&Object.keys(a).length?a:null,onDoneEditUser:()=>d(null),onAdd:u=>{s({type:"ADD_USER",payload:u}),t==="admin"&&n({text:`${r?.name||"Admin"} added a new user: ${u.firstName} ${u.lastName}`}),d(null)},onUpdate:u=>{s({type:"UPDATE_USER",payload:u}),t==="admin"&&n({text:`${r?.name||"Admin"} updated a user: ${u.firstName} ${u.lastName}`}),d(null)},dispatch:s}),i?e.jsx(Q,{}):e.jsxs("div",{className:"flex flex-col gap-16 mt-8 items-center justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[e.jsx("input",{type:"text",value:h,onChange:u=>p(u.target.value),placeholder:"Search by Name or Email",className:"border p-2 rounded"})," ",e.jsxs("select",{value:m,onChange:u=>b(u.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"moderator",children:"Moderator"})]}),e.jsxs("select",{value:j,onChange:u=>v(u.target.value),className:"border rounded p-2",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"engineering",children:"Engineering"}),e.jsx("option",{value:"support",children:"Support"}),e.jsx("option",{value:"hresources",children:"Human Resources"}),e.jsx("option",{value:"pmanagement",children:"Product Management"}),e.jsx("option",{value:"research",children:"Research and Development"}),e.jsx("option",{value:"marketing",children:"Marketing"})]}),e.jsx("button",{onClick:()=>{p(""),b("All"),v("All")},className:"bg-green-300 text-black px-4 py-2 rounded m-2 underline w-fit",children:"Clear Filters"})]}),e.jsx("div",{className:"w-full max-w-5xl overflow-x-auto",children:e.jsx(Qe,{users:y,setActiveUser:d,dispatch:s})})]})]})}function k({children:t}){return e.jsx("div",{className:"mt-16 p-2 md:ml-24 md:p-4",children:t})}function S({children:t}){const{isLoggedIn:n}=x();return n?t:e.jsx(J,{to:"/login"})}function tt(){const{isLoggedIn:t,theme:n}=x();return e.jsxs("div",{className:`flex min-h-screen w-full overflow-x-hidden ${n==="dark"?"bg-gray-800 text-white":"bg-white text-black"}`,children:[e.jsx(Pe,{}),e.jsxs("main",{className:"flex-1 md:ml-64",children:[e.jsx(Ie,{}),e.jsxs(Le,{children:[e.jsx(N,{path:"/dashboard",element:e.jsx(S,{children:e.jsx(k,{children:e.jsx(ze,{})})})}),e.jsx(N,{path:"/analytics",element:e.jsx(S,{children:e.jsx(k,{children:e.jsx(Be,{})})})}),e.jsx(N,{path:"/login",element:t?e.jsx(J,{to:"/dashboard"}):e.jsx(k,{children:e.jsx(Je,{})})}),e.jsx(N,{path:"/settings",element:e.jsx(S,{children:e.jsx(k,{children:e.jsx(He,{})})})}),e.jsx(N,{path:"/users",element:e.jsx(S,{allowedRoles:["admin"],children:e.jsx(k,{children:e.jsx(et,{})})})})]})]})]})}Re.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Ue,{children:e.jsx($e,{children:e.jsx(tt,{})})})}));
